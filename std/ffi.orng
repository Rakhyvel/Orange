cinclude "ffi.h"

fn ref_from_ptr_mut[T](ptr: [*mut ]T) -> ()!&mut T {
    extern const ptr_is_null: [*mut]T -> Bool
    extern const ref_from_ptr_helper: [*mut]T -> &mut T
    if ptr_is_null(ptr) {
        return .err
    } else {
        return .ok(ref_from_ptr_helper(ptr))
    }
}
